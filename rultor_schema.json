{
  "$schema": "http://json-schema.org/draft-07/schema",
  "type": "object",
  "description": "Schema for .rultor.yml file.",
  "properties": {
    "docker": {
      "type": "object",
      "description": "Docker image to be used in merge and release.",
      "properties": {
        "image": {
          "type": "string",
          "description": "Docker url for the image, default value is yegor256/rultor."
        },
        "as_root": {
          "type": "boolean",
          "description": "Flag to create a user inside a docker or use a default one (root), default value is false."
        }
      },
      "required": ["image"]
    },
    "readers": {
      "type": "array",
      "description": "Github user allowed to read logs (should be defined for private repos)."
    },
    "architect": {
      "type": "array",
      "description": "Project architects."
    },
    "commanders": {
      "type": "array",
      "description": "Project commanders."
    },
    "assets": {
      "type": "object",
      "additionalProperties": true,
      "description": "Additional resources, typically some secrets."
    },
    "decrypt": {
      "type": "object",
      "properties": {
        "before_install": {
          "type": "array",
          "items": {
            "type": "string"
          }
        }
      },
      "required": ["before_install"]
    },
    "install": {
      "anyOf": [
        {
          "type": "string"
        },
        {
          "type": "array",
          "items": {
            "type": "string"
          }
        }
      ],
      "description": "Common script to be used in merge and deploy."
    },
    "uninstall": {
      "anyOf": [
        {
          "type": "string"
        },
        {
          "type": "array",
          "items": {
            "type": "string"
          }
        }
      ],
      "description": "Common script to be used after operation is completed."
    },
    "merge": {
      "type": "object",
      "properties": {
        "squash": {
          "type": "boolean",
          "description": "Flag to squash commits or not, default is false."
        },
        "fast-forward": {
          "type": "string",
          "description": "May be either default (--ff argument for Git), only (--ff-only) or no (--no-ff)."
        },
        "rebase": {
          "type": "boolean",
          "description": "Flag to perform rebase from origin, default is false."
        },
        "commanders": {
          "type": "array",
          "description": "Additional users who can perform this action."
        },
        "env": {
          "type": "object",
          "additionalProperties": true,
          "description": "Additional environment variables."
        },
        "script": {
          "type": "array",
          "items": {
            "type": "string"
          }
        }
      },
      "required": ["script"]
    },
    "release": {
      "type": "object",
      "properties": {
        "script": {
          "type": "array",
          "items": {
            "type": "string"
          }
        }
      },
      "required": ["script"]
    }
  }
}